---
// import { supabase } from "../lib/supabase";
import Layout from "../layouts/Layout.astro";

// const accessToken = Astro.cookies.get("sb-access-token");
// const refreshToken = Astro.cookies.get("sb-refresh-token");

// if (!accessToken || !refreshToken) {
//   return Astro.redirect("/signin");
// }

// const { error } = await supabase.auth.setSession({
//   refresh_token: refreshToken.value,
//   access_token: accessToken.value,
// });

// if (error) {
//   Astro.cookies.delete("sb-access-token", {
//     path: "/",
//   });
//   Astro.cookies.delete("sb-refresh-token", {
//     path: "/",
//   });

//   return Astro.redirect("/auth/signin");
// }
---

<Layout title="Welcome Brett's Budgeting Bonanza!">
  <main>
    <form action="/api/csv/import" method="post" enctype="multipart/form-data">
      <input type="file" name="csv" id="csv" />
      <button type="submit">Upload CSV</button>
    </form>
  </main>
</Layout>
